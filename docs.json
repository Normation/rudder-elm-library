[{"name":"Filters","comment":" This module provides utility functions for common filtering logic.\nFor example, filters can be applied from an user input, this module has functions to manage that.\n\n\n# Filter states\n\n@docs SearchFilterState, empty, substring\n@docs getTextValue\n\n\n# Filter predicates\n\n@docs FilterStringPredicate, byValues\n\n\n## Combinators\n\n@docs minLength, and\n\n@docs applyString\n\n","unions":[{"name":"SearchFilterState","comment":" The different possible states of the search component.\n\nThe component can only known filtering logic to apply,\nand is initially configured with a filter value and the predicate to apply.\n\nThe filter can be empty (e.g. when the input is empty, which is usually the default).\n\nOther possible filters include RegExp, match option values, case sensitive variants\n\n","args":[],"cases":[]}],"aliases":[{"name":"FilterStringPredicate","comment":" A function that, when used with the filters utils exposed by this module,\ncan be used to filter data from an input String.\n\nSee `applyString` for concrete usage.\n\n","args":["data"],"type":"(String.String -> Basics.Bool) -> data -> Basics.Bool"}],"values":[{"name":"and","comment":" Combine result of predicate with `&&`\n","type":"(data -> Basics.Bool) -> (data -> Basics.Bool) -> data -> Basics.Bool"},{"name":"applyString","comment":" Assume that we filter a list of elements, and return a filtered list in the same order,\nwithout identifying each element.\n\nFiltering on list may hinder performance since Html.Keyed could be used for optimization,\nso consider using dictionary-based structure, or include a `String` identifier in the data.\n\n","type":"Filters.SearchFilterState -> Filters.FilterStringPredicate data -> data -> Basics.Bool"},{"name":"byValues","comment":" Obtain a filter that is applicable to data by using stringify-ed values from the data.\nFor instance with `{ id: String, name: String, description: String }`, `filterByValues ({ id, name } -> [ id, name ])`\nwill skip the description field and by both `id` and `name`.\n\nThe syntax `a|b` allows to match a row with two consecutive columns with the values `a` and `b`.\nSo, by construct, ordering of `|` matters.\n\n","type":"(data -> List.List String.String) -> Filters.FilterStringPredicate data"},{"name":"empty","comment":" Create an empty filter\n","type":"Filters.SearchFilterState"},{"name":"getTextValue","comment":" Get the display value of the search filter\n","type":"Filters.SearchFilterState -> String.String"},{"name":"minLength","comment":" Start applying a filter only when the input has a given length (non-strict bound).\n","type":"Basics.Int -> Filters.FilterStringPredicate data -> Filters.FilterStringPredicate data"},{"name":"substring","comment":" Create the search filter as a Substring, the main type of filter for now\n","type":"String.String -> Filters.SearchFilterState"}],"binops":[]},{"name":"RudderDataTable","comment":" A table component, inspired from [elm-sortable-table], with the\nfunctionalities taken from [DataTable].\n\nIt has a TEA approach, so it should be used with the [Nested TEA][nested-tea] architecture.\n\n[elm-sortable-table]: https://github.com/billstclair/elm-sortable-table/\n[DataTable]: https://datatables.net/\n[nested-tea]: https://sporto.github.io/elm-patterns/architecture/nested-tea.html\n\n\n# Constructors and configuration data types\n\n@docs Column, ColumnName, SortOrder\n@docs Config, ConfigBuilder, buildConfig\n@docs Options, OptionsBuilder, buildOptions\n@docs FilterOptions, FilterOptionsType\n@docs RefreshButtonOptions\n@docs StorageOptions, StorageOptionsConfig, StorageKey\n@docs Customizations\n\n\n# State-changing functions\n\n@docs updateData, updateFilter, updateDataWithFilter\n\n\n# Common TEA\n\n@docs Model, Msg\n@docs view, update, init\n@docs OutMsg\n\n\n# Testing only\n\n@docs Effect, updateWithEffect\n@docs sortColumn\n@docs storageOptions, getFilterOptionValue, getRows, getSort\n\n","unions":[{"name":"ColumnName","comment":" Type marker for the column name that is displayed\n","args":[],"cases":[["ColumnName",["String.String"]]]},{"name":"Effect","comment":" A representation of concrete effects in the type system to allow testing\n","args":["parentMsg"],"cases":[["SaveFilterInLocalStorage",["RudderDataTable.StorageKey","Filters.SearchFilterState","Json.Decode.Value -> Platform.Cmd.Cmd parentMsg"]]]},{"name":"FilterOptions","comment":" The options to include a known filter in the table header, e.g. a search input filter, or to display no filter at all.\nIt should still be possible to filter the table data with an exposed filtering function.\n","args":["row","msg"],"cases":[]},{"name":"FilterOptionsType","comment":" The filter types supported for display and/or filtering\n\n  - `SearchInputFilter` provides functionality to save to localStorage, so use it along the storage options if needed.\n  - `HtmlFilter` is arbitrary HTML in the table header\n\n","args":["row","msg"],"cases":[["HtmlFilter",["{ predicate : row -> Basics.Bool, html : Html.Html msg, toMsg : msg -> RudderDataTable.Msg msg }"]],["SearchInputFilter",["{ predicate : Filters.FilterStringPredicate row, state : Filters.SearchFilterState }"]]]},{"name":"Model","comment":" The internal model of the table, which should be kept as reference in parents, to subsequent updates\n","args":["row","msg"],"cases":[]},{"name":"Msg","comment":" The internal message which is handled internally and which can be used to execute messages from parent that were\npassed in the configuration\n","args":["parentMsg"],"cases":[]},{"name":"OutMsg","comment":" The public message to be exposed to parent components\n","args":["parentMsg"],"cases":[["Refresh",[]],["OnHtml",["parentMsg"]]]},{"name":"RefreshButtonOptions","comment":" The options to have a refresh button in the table or not. Refresh should be handled in parent from the Nested TEA pattern,\nsee `OutMsg`\n","args":["msg"],"cases":[["NoRefreshButton",[]],["RefreshButtonOptions",["List.List (Html.Attribute (RudderDataTable.Msg msg))"]]]},{"name":"SortOrder","comment":" Sorting in ascending or descending order\n","args":[],"cases":[["Asc",[]],["Desc",[]]]},{"name":"StorageOptions","comment":" The options to support saving to localStorage\n","args":["msg"],"cases":[]}],"aliases":[{"name":"Column","comment":" A table column which can be rendered in multiple ways, by default in arbitrary HTML (with the same concrete message as in the encapsulating parent).\nIt can also be sorted, an enforces ordering on all columns. FIXME: it could be made optional.\nIt supports rendering the table into CSV if provided. FIXME: the CSV function could be specified in the Options.\n","args":["row","msg"],"type":"{ name : RudderDataTable.ColumnName, renderHtml : row -> Html.Html msg, renderCsv : Maybe.Maybe (row -> List.List String.String), ordering : Ordering.Ordering row }"},{"name":"Config","comment":" The options to configure the table at initialization, namely the table columns, and also including several initial defaults.\n","args":["row","msg"],"type":"{ columns : List.Nonempty.Nonempty (RudderDataTable.Column row msg), sortBy : RudderDataTable.ColumnName, sortOrder : RudderDataTable.SortOrder, options : RudderDataTable.Options row msg }"},{"name":"ConfigBuilder","comment":" The builder DSL for the config. It allows creating the custom configuration you want for you table :\n\n  - with mandatory columns, and predicate to filter rows (since the logic of filtering must exist in our table)\n  - all the options you want and initial values\n\nAll defaults are defined in `defaultConfig`.\n\nTo use it, the builder DSL heavily uses the flow syntax, take this example :\n\n    cols =\n        NonEmptyList.Nonempty\n            (Column (ColumnName \"id\") (\\{ id } -> text id) Nothing (Ordering.byField .id))\n            [ Column (ColumnName \"name\") (\\{ name } -> span [ class \"name\" ] [ text name ]) Nothing (Ordering.byField .name) ]\n\n    filterByFields =\n        filterByValues (\\{ id, name } -> [ id, name ])\n\n    config =\n        buildConfig.newConfig cols filterByFields\n            |> buildConfig.withSortBy (ColumnName \"id\")\n            |> buildConfig.withSortOrder Desc\n            |> buildConfig.withOptions\n                (buildOptions.newOptions\n                    |> buildOptions.withRefresh [ class \"btn btn-primary\" ]\n                    |> buildOptions.withFilter (SearchInputFilter { predicate = Filters.byValues (\\{ id, name } -> [ id, name ]), state = Filters.empty }) [ class \"input-group\" ]\n                )\n\n","args":["row","msg"],"type":"{ newConfig : List.Nonempty.Nonempty (RudderDataTable.Column row msg) -> RudderDataTable.Config row msg, withSortBy : RudderDataTable.ColumnName -> RudderDataTable.Config row msg -> RudderDataTable.Config row msg, withSortOrder : RudderDataTable.SortOrder -> RudderDataTable.Config row msg -> RudderDataTable.Config row msg, withOptions : RudderDataTable.Options row msg -> RudderDataTable.Config row msg -> RudderDataTable.Config row msg }"},{"name":"Customizations","comment":" Table display customizations for adding custom HTML attributes, e.g. `class` to parts of the table.\nThe defaults should be fine, but customizations can be added and defined depending on each case.\n","args":["row","msg"],"type":"{ tableContainerAttrs : List.List (Html.Attribute (RudderDataTable.Msg msg)), theadAttrs : List.List (Html.Attribute (RudderDataTable.Msg msg)), tbodyAttrs : List.List (Html.Attribute (RudderDataTable.Msg msg)), rowAttrs : row -> List.List (Html.Attribute (RudderDataTable.Msg msg)) }"},{"name":"Options","comment":" The table features and customization that you may like to tweak.\n\nUse the `buildOptions` builder to create one.\n\n","args":["row","msg"],"type":"{ customizations : RudderDataTable.Customizations row msg, refresh : RudderDataTable.RefreshButtonOptions msg, storage : RudderDataTable.StorageOptions msg, filter : RudderDataTable.FilterOptions row msg }"},{"name":"OptionsBuilder","comment":" The builder DSL for table options\n","args":["row","msg"],"type":"{ newOptions : RudderDataTable.Options row msg, withRefresh : List.List (Html.Attribute (RudderDataTable.Msg msg)) -> RudderDataTable.Options row msg -> RudderDataTable.Options row msg, withStorage : RudderDataTable.StorageOptionsConfig msg -> RudderDataTable.Options row msg -> RudderDataTable.Options row msg, withFilter : RudderDataTable.FilterOptionsType row msg -> RudderDataTable.Options row msg -> RudderDataTable.Options row msg }"},{"name":"StorageKey","comment":" ATTENTION !\n\nYou will need to copy-paste this port in the application, because it cannot be defined in packages\n\nport saveToLocalStorage : Value -> Cmd msg\n\n","args":[],"type":"String.String"},{"name":"StorageOptionsConfig","comment":" The configuration of saving to local storage, under specific key, and with the port function,\nwhich needs to be bound to the parent Elm app\n","args":["msg"],"type":"{ key : String.String, saveToLocalStoragePort : Json.Decode.Value -> Platform.Cmd.Cmd msg }"}],"values":[{"name":"buildConfig","comment":" Builder to obtain a table configuration\n","type":"RudderDataTable.ConfigBuilder row msg"},{"name":"buildOptions","comment":" Builder of the options within the `Config`\n","type":"RudderDataTable.OptionsBuilder row msg"},{"name":"getFilterOptionValue","comment":" Get the text value in case the table has an input filter\n","type":"RudderDataTable.Model row msg -> String.String"},{"name":"getRows","comment":" Getter for the table data\n","type":"RudderDataTable.Model row msg -> List.List row"},{"name":"getSort","comment":" Getter for the table sorting state\n","type":"RudderDataTable.Model row msg -> ( RudderDataTable.ColumnName, RudderDataTable.SortOrder )"},{"name":"init","comment":" Init function from the config and initial data\n","type":"RudderDataTable.Config row msg -> List.List row -> RudderDataTable.Model row msg"},{"name":"sortColumn","comment":" Internal Msg to produce message to sort column, for testing\n","type":"RudderDataTable.ColumnName -> RudderDataTable.Msg parentMsg"},{"name":"storageOptions","comment":" Getter for the storage options on the model\n","type":"RudderDataTable.Model row msg -> Maybe.Maybe (RudderDataTable.StorageOptionsConfig msg)"},{"name":"update","comment":" The update function to call in the parent :\n\n    RudderTableMsg tableMsg ->\n        let\n            ( updatedModel, cmd, outMsg ) =\n                update tableMsg model.rudderTableModel\n\n            ...do something with public message, e.g. refresh...\n        in\n        ( { model | rudderTableModel = updatedModel }, cmd )\n\n","type":"RudderDataTable.Msg msg -> RudderDataTable.Model row msg -> ( RudderDataTable.Model row msg, Platform.Cmd.Cmd msg, Maybe.Maybe (RudderDataTable.OutMsg msg) )"},{"name":"updateData","comment":" Initialize from a set of data, useful in \"refresh\" scenario or for initialization\n","type":"List.List row -> RudderDataTable.Model row msg -> RudderDataTable.Model row msg"},{"name":"updateDataWithFilter","comment":" Filter the data within the table from the outside, useful when the table filters are not configured because the\nfilters are \"outside\" the table\n","type":"(row -> Basics.Bool) -> RudderDataTable.Model row msg -> RudderDataTable.Model row msg"},{"name":"updateFilter","comment":" Internal Msg to produce message to update the search input filter, for testing\n","type":"Filters.SearchFilterState -> RudderDataTable.Msg msg"},{"name":"updateWithEffect","comment":" Concrete implementation of the update loop, using the [effect] pattern.\nWould be useful for testing, not for public API.\n\n[effect]: https://sporto.github.io/elm-patterns/architecture/effects.html\n\n","type":"RudderDataTable.Msg parentMsg -> RudderDataTable.Model row parentMsg -> ( RudderDataTable.Model row parentMsg, List.List (RudderDataTable.Effect parentMsg), Maybe.Maybe (RudderDataTable.OutMsg parentMsg) )"},{"name":"view","comment":" The main view function for the table\n","type":"RudderDataTable.Model row msg -> Html.Html (RudderDataTable.Msg msg)"}],"binops":[]},{"name":"RudderSearchFilter","comment":" A simple search input, with the [Nested TEA][nested-tea] pattern.\n\n[nested-tea]: https://sporto.github.io/elm-patterns/architecture/nested-tea.html\n\n\n# TEA\n\n@docs Model, Msg\n@docs view, update, init\n\n\n# Public API\n\n@docs updateFilter, OutMsg\n\nIt may be useful to set the filter value from the outside (e.g. for testing).\nIt will be useful to handle `OutMsg` public message upon change of the filter.\n\n","unions":[{"name":"Model","comment":" The model of a search input filter. Here the will be always the same, and the state represents the input search.\n","args":["data"],"cases":[]},{"name":"Msg","comment":" The internal message type\n","args":[],"cases":[]},{"name":"OutMsg","comment":" The public message type which is emitted when filter has changed\n","args":["data"],"cases":[["FilterData",["data -> Basics.Bool"]]]}],"aliases":[],"values":[{"name":"init","comment":" The init function, which requires the predicate strategy, see `Filters`\n","type":"Filters.FilterStringPredicate data -> RudderSearchFilter.Model data"},{"name":"update","comment":" The update function to call in the parent :\n\n    RudderSearchFilterMsg filterMsg ->\n        let\n            ( updatedModel, cmd, outMsg ) =\n                update filterMsg model.filterModel\n\n            ...do something with public message, e.g. apply filter to some model data...\n        in\n        ( { model | filterModel = updatedModel }, cmd )\n\n","type":"RudderSearchFilter.Msg -> RudderSearchFilter.Model data -> ( RudderSearchFilter.Model data, Platform.Cmd.Cmd RudderSearchFilter.Msg, Maybe.Maybe (RudderSearchFilter.OutMsg data) )"},{"name":"updateFilter","comment":" Create a message from a given filter string, with the default `substring` filter type.\nIt may be useful to reset the search input, or set it to a specific value\n","type":"String.String -> RudderSearchFilter.Msg"},{"name":"view","comment":" The main view function for the input, without much customization\n","type":"RudderSearchFilter.Model data -> Html.Html RudderSearchFilter.Msg"}],"binops":[]},{"name":"RudderTree","comment":" A Tree component library with the [jstree] library behavior.\nIt does not aim to replicate the library in Elm, and only has some minimalistic features.\nThe event handling is purely based on the Elm architecture, with the [Nested TEA][nested-tea] pattern.\n\n[jstree]: https://www.jstree.com/\n[nested-tea]: https://sporto.github.io/elm-patterns/architecture/nested-tea.html\n\n\n# Data types and constructors\n\n@docs TreeNodeId, TreeNode, ViewTree, BranchFoldStatus\n@docs sortTree\n\n\n# TEA\n\n@docs Model, Msg\n@docs view, update, init, initFlatTree\n\n","unions":[{"name":"BranchFoldStatus","comment":" State of branch : open or closed\n","args":[],"cases":[["Open",[]],["Closed",[]]]},{"name":"Msg","comment":" The internal message type\n","args":[],"cases":[]},{"name":"ViewTree","comment":" The tree datatype that maps to a \"jstree\" representation and view :\n\n  - there is always a root is implicit, and that it is not displayed as a node, but can have children\n  - there can be \"branch\" nodes which may contain other branches and leaves, and which can be folded\n  - there can be \"leaf\" nodes which do not contain children and thus cannot be folded\n\n","args":[],"cases":[["Root",["List.List RudderTree.ViewTree"]],["Branch",["RudderTree.TreeNode","List.List RudderTree.ViewTree","RudderTree.BranchFoldStatus"]],["Leaf",["RudderTree.TreeNode"]]]}],"aliases":[{"name":"Model","comment":" The model of the tree, the root tree must always be Root\nFIXME: it needs to be an opaque type then\n","args":[],"type":"{ rootTree : RudderTree.ViewTree }"},{"name":"TreeNode","comment":" Representation of a node of a tree, be it a branch or a leaf\n","args":[],"type":"{ id : RudderTree.TreeNodeId, name : String.String }"},{"name":"TreeNodeId","comment":" The type marker to identify a node in the tree. Identifier is very useful for event handling, and performance optimization\n","args":[],"type":"String.String"}],"values":[{"name":"init","comment":" Initial tree without any elements\n","type":"RudderTree.Model"},{"name":"initFlatTree","comment":" Constructor to initialize a `Model` from a flat tree i.e with only leaves\n","type":"Dict.Dict RudderTree.TreeNodeId ( RudderTree.TreeNode, List.List RudderTree.TreeNode, RudderTree.BranchFoldStatus ) -> RudderTree.Model"},{"name":"sortTree","comment":" Sort the tree recursively according to the ordering.\nOnly branches need to be sorted together, and leaf are sorted\n\nBE CAREFUL: only use it for initializers or setters that are called not so often,\nas it may be costly to sort a huge tree\n(e.g. if filtering nodes by user input, should debounce before sorting the filtered tree)\n\n","type":"RudderTree.ViewTree -> RudderTree.ViewTree"},{"name":"update","comment":" The update function to call in the parent :\n\n    RudderTreeMsg treeMsg ->\n        let\n            ( updatedModel, cmd, outMsg ) =\n                update treeMsg model.treeModel\n\n        in\n        ( { model | treeModel = updatedModel }, cmd )\n\n","type":"RudderTree.Msg -> RudderTree.Model -> ( RudderTree.Model, Platform.Cmd.Cmd RudderTree.Msg )"},{"name":"view","comment":" View with a \"jstree\" structure\n","type":"RudderTree.Model -> Html.Html RudderTree.Msg"}],"binops":[]}]